
<!DOCTYPE html>
<html>
  <head>
    <title>CSR Creator</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link rel="stylesheet" href="bootstrap.min.css">
    <script>
      if (location.hostname !== 'localhost' && location.protocol === 'http:') {
        window.location = 'https://' + location.host + location.pathname;
      }
    </script>
  </head>
  <body>
    <a href="https://github.com/calvinmetcalf/csr" class="github-corner"><svg width="80" height="80" viewBox="0 0 250 250" style="fill:#151513; color:#fff; position: absolute; top: 0; border: 0; right: 0;"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style>
    <div class="container">
      <div class="page-header">
  <h1>CSR Generator <small>Completly Client Side</small></h1>
</div>
    <form class="form-horizontal" id="main-form">
  <div class="form-group">
    <label class="col-md-4 control-label" for="keytype">Key Type</label>
    <div class="col-md-4">
      <select id="keytype" name="keytype" class="form-control">
        <option value="1">ECDSA 256</option>
        <option value="2">RSA 2048</option>
        <option value="3">RSA 4096</option>
        <option value="4">ECDSA 384</option>
        <option value="5">ECDSA 521</option>
      </select>
    </div>
  </div>
  <div class="form-group">
    <label class="col-md-4 control-label" for="commonName">Site Url</label>
    <div class="col-md-4">
    <input id="commonName" name="commonName" type="text" placeholder="" class="form-control input-md" value="example.com"/>

    </div>
  </div>
  <div class="form-group">
    <label class="col-md-4 control-label" for="subjectAltName">Alternate Name (optional)</label>
    <div class="col-md-4">
    <input id="subjectAltName" name="subjectAltName" type="text" placeholder="" class="form-control input-md"/>

    </div>
  </div>
  <div class="form-group">
    <label class="col-md-4 control-label" for="countryName">Country</label>
    <div class="col-md-4">
    <select id="countryName" name="countryName" class="form-control input-md">
      <option value="AF">AFGHANISTAN</option>
      <option value="AX">ÅLAND ISLANDS</option>
      <option value="AL">ALBANIA</option>
      <option value="DZ">ALGERIA</option>
      <option value="AS">AMERICAN SAMOA</option>
      <option value="AD">ANDORRA</option>
      <option value="AO">ANGOLA</option>
      <option value="AI">ANGUILLA</option>
      <option value="AQ">ANTARCTICA</option>
      <option value="AG">ANTIGUA AND BARBUDA</option>
      <option value="AR">ARGENTINA</option>
      <option value="AM">ARMENIA</option>
      <option value="AW">ARUBA</option>
      <option value="AU">AUSTRALIA</option>
      <option value="AT">AUSTRIA</option>
      <option value="AZ">AZERBAIJAN</option>
      <option value="BS">BAHAMAS</option>
      <option value="BH">BAHRAIN</option>
      <option value="BD">BANGLADESH</option>
      <option value="BB">BARBADOS</option>
      <option value="BY">BELARUS</option>
      <option value="BE">BELGIUM</option>
      <option value="BZ">BELIZE</option>
      <option value="BJ">BENIN</option>
      <option value="BM">BERMUDA</option>
      <option value="BT">BHUTAN</option>
      <option value="BO">BOLIVIA, PLURINATIONAL STATE OF</option>
      <option value="BQ">BONAIRE, SINT EUSTATIUS AND SABA</option>
      <option value="BA">BOSNIA AND HERZEGOVINA</option>
      <option value="BW">BOTSWANA</option>
      <option value="BV">BOUVET ISLAND</option>
      <option value="BR">BRAZIL</option>
      <option value="IO">BRITISH INDIAN OCEAN TERRITORY</option>
      <option value="BN">BRUNEI DARUSSALAM</option>
      <option value="BG">BULGARIA</option>
      <option value="BF">BURKINA FASO</option>
      <option value="BI">BURUNDI</option>
      <option value="KH">CAMBODIA</option>
      <option value="CM">CAMEROON</option>
      <option value="CA">CANADA</option>
      <option value="CV">CAPE VERDE</option>
      <option value="KY">CAYMAN ISLANDS</option>
      <option value="CF">CENTRAL AFRICAN REPUBLIC</option>
      <option value="TD">CHAD</option>
      <option value="CL">CHILE</option>
      <option value="CN">CHINA</option>
      <option value="CX">CHRISTMAS ISLAND</option>
      <option value="CC">COCOS (KEELING) ISLANDS</option>
      <option value="CO">COLOMBIA</option>
      <option value="KM">COMOROS</option>
      <option value="CG">CONGO</option>
      <option value="CD">CONGO, THE DEMOCRATIC REPUBLIC OF THE</option>
      <option value="CK">COOK ISLANDS</option>
      <option value="CR">COSTA RICA</option>
      <option value="CI">CÔTE D'IVOIRE</option>
      <option value="HR">CROATIA</option>
      <option value="CU">CUBA</option>
      <option value="CW">CURAÇAO</option>
      <option value="CY">CYPRUS</option>
      <option value="CZ">CZECH REPUBLIC</option>
      <option value="DK">DENMARK</option>
      <option value="DJ">DJIBOUTI</option>
      <option value="DM">DOMINICA</option>
      <option value="DO">DOMINICAN REPUBLIC</option>
      <option value="EC">ECUADOR</option>
      <option value="EG">EGYPT</option>
      <option value="SV">EL SALVADOR</option>
      <option value="GQ">EQUATORIAL GUINEA</option>
      <option value="ER">ERITREA</option>
      <option value="EE">ESTONIA</option>
      <option value="ET">ETHIOPIA</option>
      <option value="FK">FALKLAND ISLANDS (MALVINAS)</option>
      <option value="FO">FAROE ISLANDS</option>
      <option value="FJ">FIJI</option>
      <option value="FI">FINLAND</option>
      <option value="FR">FRANCE</option>
      <option value="GF">FRENCH GUIANA</option>
      <option value="PF">FRENCH POLYNESIA</option>
      <option value="TF">FRENCH SOUTHERN TERRITORIES</option>
      <option value="GA">GABON</option>
      <option value="GM">GAMBIA</option>
      <option value="GE">GEORGIA</option>
      <option value="DE">GERMANY</option>
      <option value="GH">GHANA</option>
      <option value="GI">GIBRALTAR</option>
      <option value="GR">GREECE</option>
      <option value="GL">GREENLAND</option>
      <option value="GD">GRENADA</option>
      <option value="GP">GUADELOUPE</option>
      <option value="GU">GUAM</option>
      <option value="GT">GUATEMALA</option>
      <option value="GG">GUERNSEY</option>
      <option value="GN">GUINEA</option>
      <option value="GW">GUINEA-BISSAU</option>
      <option value="GY">GUYANA</option>
      <option value="HT">HAITI</option>
      <option value="HM">HEARD ISLAND AND MCDONALD ISLANDS</option>
      <option value="VA">HOLY SEE (VATICAN CITY STATE)</option>
      <option value="HN">HONDURAS</option>
      <option value="HK">HONG KONG</option>
      <option value="HU">HUNGARY</option>
      <option value="IS">ICELAND</option>
      <option value="IN">INDIA</option>
      <option value="ID">INDONESIA</option>
      <option value="IR">IRAN, ISLAMIC REPUBLIC OF</option>
      <option value="IQ">IRAQ</option>
      <option value="IE">IRELAND</option>
      <option value="IM">ISLE OF MAN</option>
      <option value="IL">ISRAEL</option>
      <option value="IT">ITALY</option>
      <option value="JM">JAMAICA</option>
      <option value="JP">JAPAN</option>
      <option value="JE">JERSEY</option>
      <option value="JO">JORDAN</option>
      <option value="KZ">KAZAKHSTAN</option>
      <option value="KE">KENYA</option>
      <option value="KI">KIRIBATI</option>
      <option value="KP">KOREA, DEMOCRATIC PEOPLE'S REPUBLIC OF</option>
      <option value="KR">KOREA, REPUBLIC OF</option>
      <option value="KW">KUWAIT</option>
      <option value="KG">KYRGYZSTAN</option>
      <option value="LA">LAO PEOPLE'S DEMOCRATIC REPUBLIC</option>
      <option value="LV">LATVIA</option>
      <option value="LB">LEBANON</option>
      <option value="LS">LESOTHO</option>
      <option value="LR">LIBERIA</option>
      <option value="LY">LIBYA</option>
      <option value="LI">LIECHTENSTEIN</option>
      <option value="LT">LITHUANIA</option>
      <option value="LU">LUXEMBOURG</option>
      <option value="MO">MACAO</option>
      <option value="MK">MACEDONIA, THE FORMER YUGOSLAV REPUBLIC OF</option>
      <option value="MG">MADAGASCAR</option>
      <option value="MW">MALAWI</option>
      <option value="MY">MALAYSIA</option>
      <option value="MV">MALDIVES</option>
      <option value="ML">MALI</option>
      <option value="MT">MALTA</option>
      <option value="MH">MARSHALL ISLANDS</option>
      <option value="MQ">MARTINIQUE</option>
      <option value="MR">MAURITANIA</option>
      <option value="MU">MAURITIUS</option>
      <option value="YT">MAYOTTE</option>
      <option value="MX">MEXICO</option>
      <option value="FM">MICRONESIA, FEDERATED STATES OF</option>
      <option value="MD">MOLDOVA, REPUBLIC OF</option>
      <option value="MC">MONACO</option>
      <option value="MN">MONGOLIA</option>
      <option value="ME">MONTENEGRO</option>
      <option value="MS">MONTSERRAT</option>
      <option value="MA">MOROCCO</option>
      <option value="MZ">MOZAMBIQUE</option>
      <option value="MM">MYANMAR</option>
      <option value="NA">NAMIBIA</option>
      <option value="NR">NAURU</option>
      <option value="NP">NEPAL</option>
      <option value="NL">NETHERLANDS</option>
      <option value="NC">NEW CALEDONIA</option>
      <option value="NZ">NEW ZEALAND</option>
      <option value="NI">NICARAGUA</option>
      <option value="NE">NIGER</option>
      <option value="NG">NIGERIA</option>
      <option value="NU">NIUE</option>
      <option value="NF">NORFOLK ISLAND</option>
      <option value="MP">NORTHERN MARIANA ISLANDS</option>
      <option value="NO">NORWAY</option>
      <option value="OM">OMAN</option>
      <option value="PK">PAKISTAN</option>
      <option value="PW">PALAU</option>
      <option value="PS">PALESTINE, STATE OF</option>
      <option value="PA">PANAMA</option>
      <option value="PG">PAPUA NEW GUINEA</option>
      <option value="PY">PARAGUAY</option>
      <option value="PE">PERU</option>
      <option value="PH">PHILIPPINES</option>
      <option value="PN">PITCAIRN</option>
      <option value="PL">POLAND</option>
      <option value="PT">PORTUGAL</option>
      <option value="PR">PUERTO RICO</option>
      <option value="QA">QATAR</option>
      <option value="RE">RÉUNION</option>
      <option value="RO">ROMANIA</option>
      <option value="RU">RUSSIAN FEDERATION</option>
      <option value="RW">RWANDA</option>
      <option value="BL">SAINT BARTHÉLEMY</option>
      <option value="SH">SAINT HELENA, ASCENSION AND TRISTAN DA CUNHA</option>
      <option value="KN">SAINT KITTS AND NEVIS</option>
      <option value="LC">SAINT LUCIA</option>
      <option value="MF">SAINT MARTIN (FRENCH PART)</option>
      <option value="PM">SAINT PIERRE AND MIQUELON</option>
      <option value="VC">SAINT VINCENT AND THE GRENADINES</option>
      <option value="WS">SAMOA</option>
      <option value="SM">SAN MARINO</option>
      <option value="ST">SAO TOME AND PRINCIPE</option>
      <option value="SA">SAUDI ARABIA</option>
      <option value="SN">SENEGAL</option>
      <option value="RS">SERBIA</option>
      <option value="SC">SEYCHELLES</option>
      <option value="SL">SIERRA LEONE</option>
      <option value="SG">SINGAPORE</option>
      <option value="SX">SINT MAARTEN (DUTCH PART)</option>
      <option value="SK">SLOVAKIA</option>
      <option value="SI">SLOVENIA</option>
      <option value="SB">SOLOMON ISLANDS</option>
      <option value="SO">SOMALIA</option>
      <option value="ZA">SOUTH AFRICA</option>
      <option value="GS">SOUTH GEORGIA AND THE SOUTH SANDWICH ISLANDS</option>
      <option value="SS">SOUTH SUDAN</option>
      <option value="ES">SPAIN</option>
      <option value="LK">SRI LANKA</option>
      <option value="SD">SUDAN</option>
      <option value="SR">SURINAME</option>
      <option value="SJ">SVALBARD AND JAN MAYEN</option>
      <option value="SZ">SWAZILAND</option>
      <option value="SE">SWEDEN</option>
      <option value="CH">SWITZERLAND</option>
      <option value="SY">SYRIAN ARAB REPUBLIC</option>
      <option value="TW">TAIWAN, PROVINCE OF CHINA</option>
      <option value="TJ">TAJIKISTAN</option>
      <option value="TZ">TANZANIA, UNITED REPUBLIC OF</option>
      <option value="TH">THAILAND</option>
      <option value="TL">TIMOR-LESTE</option>
      <option value="TG">TOGO</option>
      <option value="TK">TOKELAU</option>
      <option value="TO">TONGA</option>
      <option value="TT">TRINIDAD AND TOBAGO</option>
      <option value="TN">TUNISIA</option>
      <option value="TR">TURKEY</option>
      <option value="TM">TURKMENISTAN</option>
      <option value="TC">TURKS AND CAICOS ISLANDS</option>
      <option value="TV">TUVALU</option>
      <option value="UG">UGANDA</option>
      <option value="UA">UKRAINE</option>
      <option value="AE">UNITED ARAB EMIRATES</option>
      <option value="GB">UNITED KINGDOM</option>
      <option value="US" selected>UNITED STATES</option>
      <option value="UM">UNITED STATES MINOR OUTLYING ISLANDS</option>
      <option value="UY">URUGUAY</option>
      <option value="UZ">UZBEKISTAN</option>
      <option value="VU">VANUATU</option>
      <option value="VE">VENEZUELA, BOLIVARIAN REPUBLIC OF</option>
      <option value="VN">VIET NAM</option>
      <option value="VG">VIRGIN ISLANDS, BRITISH</option>
      <option value="VI">VIRGIN ISLANDS, U.S.</option>
      <option value="WF">WALLIS AND FUTUNA</option>
      <option value="EH">WESTERN SAHARA</option>
      <option value="YE">YEMEN</option>
      <option value="ZM">ZAMBIA</option>
      <option value="ZW">ZIMBABWE</option>
    </select>
    </div>
  </div>

  <div class="form-group">
    <label class="col-md-4 control-label" for="stateOrProvinceName">State or Province</label>
    <div class="col-md-4">
    <input id="stateOrProvinceName" name="stateOrProvinceName" value="Massachusetts" type="text" placeholder="" class="form-control input-md" />

    </div>
  </div>

  <div class="form-group" id="gen-form">
    <label class="col-md-4 control-label" for="localityName">Locality</label>
    <div class="col-md-4">
    <input id="localityName" name="localityName" value="Quincy" type="text" placeholder="" class="form-control input-md" />

    </div>
  </div>

  <div class="form-group">
    <label class="col-md-4 control-label" for="organizationName">Org</label>
    <div class="col-md-4">
    <input id="organizationName" name="organizationName" value="national wiget co" type="text" placeholder="" class="form-control input-md" />

    </div>
  </div>

  <div class="form-group">
    <label class="col-md-4 control-label" for="organizationalUnitName">Org Unit</label>
    <div class="col-md-4">
    <input id="organizationalUnitName" name="organizationalUnitName" value="it" type="text" placeholder="" class="form-control input-md" />

    </div>
  </div>  <div class="form-group">  <div class="col-md-4 col-md-offset-4">
   <input type="submit" value="create" class="btn btn-primary"/>
 </div>
 </div>
  </form>
  <div class="row"> <div class="col-md-6 col-md-offset-2" id="cert"><span/></div></div>
  <div class="row"> <div class="col-md-6 col-md-offset-2" id="key"><span/></div></div>
</div>
  <script>

  var form = document.getElementById('main-form');
  var certTag = document.getElementById('cert');
  var keyTag = document.getElementById('key');
  var worker = new Worker('./worker.js');
  worker.addEventListener('message', function (e) {
    var resp = e.data;
    setCert(resp[0]);
    setKey(resp[1]);
  });
  worker.addEventListener('error', function (e) {
    console.log(e);
  });
  form.addEventListener('submit', function (event) {
    event.preventDefault();
    var formData = new FormData(form);

    var obj = {};
    var keytype;
    for (let [key, value] of formData) {
      if (key === 'keytype') {
        keytype = value;
        continue;
      }
      obj[key] = value;
    }
    clearAll();
    worker.postMessage([keytype, obj]);
  });
  function clearAll() {
    var tag = document.createElement('span');
    var tag2 = document.createElement('span');
    certTag.replaceChild(tag, certTag.firstChild);
    keyTag.replaceChild(tag2, keyTag.firstChild);
  }
  function setCert(cert) {
    var tag = document.createElement('pre');
    tag.textContent=cert;
    certTag.replaceChild(tag, certTag.firstChild);
  }
  function setKey(key) {
    var tag = document.createElement('pre');
    tag.textContent=key;
    keyTag.replaceChild(tag, keyTag.firstChild);
  }
  </script>
  </body>
</html>
